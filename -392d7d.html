<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📖&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>回溯算法&nbsp;|&nbsp;Zhao’s Blog</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="回溯算法">
  
    <meta name="description" content="整理全部回溯算法的知识点">
    <meta property="og:description" content="整理全部回溯算法的知识点">
  
  
    <meta property="og:image" content="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😃&lt;/text&gt;&lt;/svg&gt;">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📖&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😀&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>About</span>
        </div>
      </a>
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😃&lt;/text&gt;&lt;/svg&gt;"></span>
      </div>
    
    <h1 class="Header__Title">回溯算法</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Thu, Nov 17, 2022</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--yellow">
            <a href="tag/JavaScript.html">JavaScript</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--pink">
            <a href="tag/算法.html">算法</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/392d7da9f087468eaa7af120a008dcda" class="PageRoot PageRoot--FullWidth"><div id="https://www.notion.so/34e3dc4167df44a1a0222e5423c219d3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">回溯算法是一种暴力的搜索方式，一般用单词 backtracking 表示。它是为了模拟未知的for循环次数，是递归的副产品。</span></span></p></div><div id="https://www.notion.so/4f8b181c923a426eaa3276df235536f3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">它的本质是穷举，穷举所有可能，然后选出想要的答案。</span></span></p></div><ul id="https://www.notion.so/6a681e7139574bb6bdb869355058af4c" class="ColorfulBlock ColorfulBlock--ColorGray TableOfContents"><li class="TableOfContents__Item"><a href="#https://www.notion.so/cb51c75cc6144943ab9424563c71ebeb"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">理论</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/b3c5756b1a574d63bb457c893989c8fb"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">回溯法解决的问题</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/30701392125c487db2517f26d1698218"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">理解</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/f0c303702d944fdebc9f77ea1fd9394e"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">组合问题</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/f2f7cf94c5544addb54f1bce7094e50c"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">N个数和为k（无重复）</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/8e5ab9b28af44e968d4ae83ad7795792"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">题目分析</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/1c8684040bb94d63aea05acf1d370e8f"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">剪枝</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/46781c4c86cd4654b567381ebb894d70"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">组合总和2</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/1ead994623b041abb1b27c770e04b2b2"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">题目分析</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/34734afe93414826aa92051128e27d8c"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">去重思路</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/9af05969f4db4eb480996c5e58888b8f"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">优化</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/1dde497720d04716b268b6aae4a4831f"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">分割问题</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/22f217be3d9b4d598e8f03e8a8c9d974"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">复原ip地址</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/2ca8f5d3361c4562999f7c4c129e5a16"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">题目分析</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/ede7673ebdc64eb0a05c2d404a519aa8"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">字符串截取注意点</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/60345b9cc9a84b23bbb65f48295dc6c6"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">tips</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/ebdd46a790ea46029cd136a6fd20aabc"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">子集问题</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/3b92cb7afff44762929dfa250fe0d80b"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">子集</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/7889b6f9bf9440c18602ae78abe70764"><div style="margin-left:96px"><span class="SemanticStringArray"><span class="SemanticString">题目分析</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/c27d7ad8c8294a5783f53812ccfc3b0d"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">子集2</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/e2317929d6e84b39bcbc7016acb95375"><div style="margin-left:96px"><span class="SemanticStringArray"><span class="SemanticString">题目分析</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/378d172c15454f108b497de16d3c83d7"><div style="margin-left:96px"><span class="SemanticStringArray"><span class="SemanticString">另一种去重思路</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/e67fa6aaf68547548f8661ea354767f6"><div style="margin-left:96px"><span class="SemanticStringArray"><span class="SemanticString">set去重与used数组去重比较</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/4234a8ca5628494785f324a4618bb6f3"><div style="margin-left:72px"><span class="SemanticStringArray"><span class="SemanticString">排列问题</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/d08901d43adb49d0bcbd14821952ab80"><div style="margin-left:96px"><span class="SemanticStringArray"><span class="SemanticString">全排列2</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/d90be35cfd0b471cb695559a150875fb"><div style="margin-left:120px"><span class="SemanticStringArray"><span class="SemanticString">题目分析</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/bcf7cffe90c448dfa0cd57f8d461025c"><div style="margin-left:120px"><span class="SemanticStringArray"><span class="SemanticString">思路扩展</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/87906050912e4f5a8620b6675fb0f173"><div style="margin-left:96px"><span class="SemanticStringArray"><span class="SemanticString">棋盘问题</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/fc2585def2a546f9877920a46258fd87"><div style="margin-left:96px"><span class="SemanticStringArray"><span class="SemanticString">其他问题</span></span></div></a></li></ul><h1 id="https://www.notion.so/cb51c75cc6144943ab9424563c71ebeb" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/cb51c75cc6144943ab9424563c71ebeb"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">理论</span></span></h1><h2 id="https://www.notion.so/b3c5756b1a574d63bb457c893989c8fb" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/b3c5756b1a574d63bb457c893989c8fb"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">回溯法解决的问题</span></span></h2><div id="https://www.notion.so/c574ab1bb6d84251927c483f5fde6320" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F02de356b-9a8d-4ae6-8e43-cd084d9e90d7%2FUntitled.png?width=1142&amp;table=block&amp;id=c574ab1b-b6d8-4251-927c-483f5fde6320"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F02de356b-9a8d-4ae6-8e43-cd084d9e90d7%2FUntitled.png?width=1142&amp;table=block&amp;id=c574ab1b-b6d8-4251-927c-483f5fde6320" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/978f9a108c08463e96c31eec2c57e476" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">组合问题</strong></span><span class="SemanticString">：N个数里面按一定规则找出k个数的集合</span></span></li><li id="https://www.notion.so/3b2623e7cdd84ac3afb2a3fb6ef5832f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">切割问题</strong></span><span class="SemanticString">：一个字符串按一定规则有几种切割方式</span></span></li><li id="https://www.notion.so/af2e51c8077d4869aff43af315a718b5" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">子集问题</strong></span><span class="SemanticString">：一个N个数的集合里有多少符合条件的子集</span></span></li><li id="https://www.notion.so/e3560479834d427a8d916e7df2480a76" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">排列问题</strong></span><span class="SemanticString">：N个数按一定规则全排列，有几种排列方式</span></span></li><li id="https://www.notion.so/60344152764a4284b826b89051de01cf" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">棋盘问题</strong></span><span class="SemanticString">：N皇后，解数独等等</span></span></li></ul><div id="https://www.notion.so/d15d705bffd34b0aa48b49baf1a9f879" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">💡</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString">组合与排列：组合无顺序概念的，排列是需要顺序的。例如 [1, 2]与[2, 1]是同一个组合，但是是两个排列</span></span></p></div><h2 id="https://www.notion.so/30701392125c487db2517f26d1698218" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/30701392125c487db2517f26d1698218"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">理解</span></span></h2><div id="https://www.notion.so/0a8e62029b4d4f3d9c6f1a0f536d0b4e" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F14720ace-1e0d-484d-841b-79dd166d0dea%2FUntitled.png?width=1558&amp;table=block&amp;id=0a8e6202-9b4d-4f3d-9c6f-1a0f536d0b4e"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F14720ace-1e0d-484d-841b-79dd166d0dea%2FUntitled.png?width=1558&amp;table=block&amp;id=0a8e6202-9b4d-4f3d-9c6f-1a0f536d0b4e" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/731996e660a74132a721631fe71e334a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">所有的回溯问题，都可以抽象成树形结构，因为回溯都是在集合里，递归找子集</span></span></p></div><div id="https://www.notion.so/5fe93ee5bde2456d9fd406ff899322e0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">集合的大小构成了树的宽度，递归的深度也构成了树的深度</span></span></p></div><div id="https://www.notion.so/8ce5c6f872fa47aca79fdb2c648f4ff6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">递归就一定需要终止条件，所以这个树高度一定是有限制的</span></span></p></div><pre id="https://www.notion.so/86ecd33ccfdb482b84a61b374bbdc513" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">void</span> <span class="token function">backtracking</span><span class="token punctuation">(</span><span class="token parameter">参数</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>终止条件<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        存放结果<span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span>选择：本层集合中元素（树中节点孩子的数量就是集合的大小）<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        处理节点<span class="token punctuation">;</span>
        <span class="token function">backtracking</span><span class="token punctuation">(</span>路径，选择列表<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 递归</span>
        回溯，撤销处理结果
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/d77cc521f79d4eeab7e7babf346730c7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">一般来说，回溯是没有返回值的，但是如果用回溯找唯一解，或者是最优解，那么就会需要一个返回值，这样当找到这个解的时候，再继续算法其实就可以直接跳过了，这个在后面有描述</span></span></p></div><div id="https://www.notion.so/6d6a24b31f5145b7bce2b250fbb3250c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">对于回溯问题，一般需要考虑三个方面：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/a36ea7fe8a214e6c8775494127c3d88d" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">回溯返回值和参数</span></span></li><li id="https://www.notion.so/5e26d7ea7a09462e8ed64eda0f701f25" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">终止条件</span></span></li><li id="https://www.notion.so/0558c0bfac6d44c29748309bea708610" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">单层如何搜索</span></span></li></ol><h1 id="https://www.notion.so/f0c303702d944fdebc9f77ea1fd9394e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/f0c303702d944fdebc9f77ea1fd9394e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">组合问题</span></span></h1><div id="https://www.notion.so/274b09986b15475cb5201622b2b27877" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">💡</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString">这类型题目，一般要求从给定的子集中寻找组合数，例如从 n 个数的子集中，寻找任意 k 个数的组合数，或者这 k 个组合可以做什么事情。其中每个数字只能用一次</span></span></p></div><div id="https://www.notion.so/303fac4e3a0b46d4944e659b07617304" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">按照上述思路，分析三个方面：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/c94fb83f7e864d32a3d9922db63632b8" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">返回值与参数</strong></span><span class="SemanticString">：题目要求寻找全部组合，那么就不要返回值，把过程进行到底就可以了。参数需要知道当前存放状态的一个结果，一般来说是数组。因为是组合，所以不需要考虑顺序，但是需要考虑用过的不能再用，所以需要知道当前操作从哪里开始</span></span></li><li id="https://www.notion.so/ad3bfd7fc4ed489e99bd92f4e76af795" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">终止条件</strong></span><span class="SemanticString">：根据题目来，如果是做什么事情比如和是多少，那么就输出他，如果是多少个值，那么就判断结果长度</span></span></li><li id="https://www.notion.so/ed2ead64b8fc466d94e04ccf4e2fef18" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">单层如何搜索</strong></span><span class="SemanticString">：从起始位置开始，加入下一个元素，然后递归。递归结束之后，需要回溯。</span></span></li></ol><div id="https://www.notion.so/339b53149bc742d8989d16c6c7cd5012" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">这样直接写比较抽象。以几个题目为例，写一下具体代码理解下过程：</span></span></p></div><h2 id="https://www.notion.so/f2f7cf94c5544addb54f1bce7094e50c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/f2f7cf94c5544addb54f1bce7094e50c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">N个数和为k（无重复）</span></span></h2><div id="https://www.notion.so/2dd66a2ecd9d4ab6b01298b936f09cf4" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">💡</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString">找出所有相加之和为 n 的 k 个数的组合。组合中只允许含有 1 - 9 的正整数，并且每种组合中不存在重复的数字。</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://leetcode.cn/problems/combination-sum-iii/submissions/">https://leetcode.cn/problems/combination-sum-iii/submissions/</a></span></span></p></div><h3 id="https://www.notion.so/8e5ab9b28af44e968d4ae83ad7795792" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/8e5ab9b28af44e968d4ae83ad7795792"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">题目分析</span></span></h3><div id="https://www.notion.so/9158bbdabe324f839a4c3aeedfec6460" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F1340565b-2732-44a5-9e74-345cda66c863%2FUntitled.png?width=2026&amp;table=block&amp;id=9158bbda-be32-4f83-9a4c-3aeedfec6460"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F1340565b-2732-44a5-9e74-345cda66c863%2FUntitled.png?width=2026&amp;table=block&amp;id=9158bbda-be32-4f83-9a4c-3aeedfec6460" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/be63c8a6f201441b85c7c6c2d1c4dc6d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">可以根据题目画出上面的图</span></span></p></div><pre id="https://www.notion.so/c0893d5b48c7407cbdd2c83e6e418cda" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">var</span> <span class="token function-variable function">combinationSum3</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">k<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token comment">/**
			idx 为起始位置，判断从哪里开始
			target 当前都目标，因为需要求值，这个数可以通过path遍历计算得知，但是比较麻烦，每次都需要遍历，所以在这里写粗来，注意回溯的时候要一并处理
			path 当前解
		*/</span>
    <span class="token keyword">const</span> <span class="token function-variable function">dfs</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">idx<span class="token punctuation">,</span> target<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>idx <span class="token operator">></span> n<span class="token punctuation">)</span> <span class="token keyword">return</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">==</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 当路径长度与结果相符</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
						<span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> idx<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">9</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            target <span class="token operator">-=</span> i <span class="token comment">// 计算下一个目标</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> target<span class="token punctuation">,</span> path<span class="token punctuation">)</span> <span class="token comment">// 递归</span>
						path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 递归结束，回溯</span>
            target <span class="token operator">+=</span> i <span class="token comment">// 注意处理</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> res
<span class="token punctuation">}</span><span class="token punctuation">;</span></span></span></span></code></pre><div id="https://www.notion.so/a6f27e7605f243238427db2b94e31fc5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">这样，按照上述思路就把代码写粗来了，但是就会出现另一个问题，如果数值过大，就会超时。上述思路是对的，但是有些没必要的过程，就需要进行剪纸操作</span></span></p></div><h3 id="https://www.notion.so/1c8684040bb94d63aea05acf1d370e8f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/1c8684040bb94d63aea05acf1d370e8f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">剪枝</span></span></h3><div id="https://www.notion.so/83a3de0832e54505a37ac312c17e2738" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">顾名思义，就是去掉多余的分支，可以节省很多时间</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/5dbf808108344fc4b3c6f0514239acbd" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">数量上的剪枝（典型思路）</span></span></li></ol><div id="https://www.notion.so/a7cdfd304a874277bfd2ec7e223a82a7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">题目要求的是k个数相加为n，那么如果在回溯中，因为是从前往后拿，那么当可用的数字加上当前取的数字已经小于k了，那么其实后面就没必要再继续回溯了</span></span></p></div><div id="https://www.notion.so/54356c7d0ed94edeb371a83d1fff42dc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">例如：取 4 个数，当前 path 长度为 1， n 为 9 ，也就是还差2个数，那么，i 可取的值为 idx ～ 7，如果 idx 为 8，即使把后面的都加上，数量也不够 4 了</span></span></p></div><div id="https://www.notion.so/101fc6e822e145cfa4f6df4bbf6d879a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">所以这个最大值可以替换为 n - （k - path.length） + 1</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/d9858c7699f14027add978c16222539c" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">和上剪枝（根据题目而来）</span></span></li></ol><div id="https://www.notion.so/ec3c565df61e44de90e5250df1fd7ec5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">题目要求和为k，那么如果加到某个地方，和已经超过k了（题目里都是正整数），那么其实也可以停止了</span></span></p></div><pre id="https://www.notion.so/03c3edebc2b24d499b9f6d2c6c47956b" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">var</span> <span class="token function-variable function">combinationSum3</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">k<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token comment">/**
			idx 为起始位置，判断从哪里开始
			target 当前都目标，因为需要求值，这个数可以通过path遍历计算得知，但是比较麻烦，每次都需要遍历，所以在这里写粗来，注意回溯的时候要一并处理
			path 当前解
		*/</span>
    <span class="token keyword">const</span> <span class="token function-variable function">dfs</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">idx<span class="token punctuation">,</span> target<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 剪枝思路2</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">==</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
						<span class="token keyword">return</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> idx<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">9</span> <span class="token operator">-</span> <span class="token punctuation">(</span>k <span class="token operator">-</span> path<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            target <span class="token operator">-=</span> i <span class="token comment">// 计算下一个目标</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> target<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 递归</span>
						path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 递归结束，回溯</span>
            target <span class="token operator">+=</span> i <span class="token comment">// 注意处理</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> res
<span class="token punctuation">}</span><span class="token punctuation">;</span></span></span></span></code></pre><div id="https://www.notion.so/206b52e8bf18410eadcad0b66abb4b80" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">这样，就在原先基础上把很多不必要的操作去掉了，ac！</span></span></p></div><h2 id="https://www.notion.so/46781c4c86cd4654b567381ebb894d70" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/46781c4c86cd4654b567381ebb894d70"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">组合总和2</span></span></h2><div id="https://www.notion.so/509ba91170664f55949b0d2accdcda88" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">💡</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://leetcode.cn/problems/combination-sum-ii/"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">力扣题目链接(opens new window)</strong></a></span></span><div id="https://www.notion.so/942e5b4f884042fc8dd1e012b73112e4" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">给定一个数组 candidates 和一个目标数 target ，找出 candidates 中所有可以使数字和为 target 的组合。</span></span></p></div><div id="https://www.notion.so/01a6030faf6347feb8ec98c48fef7d40" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">candidates 中的每个数字在每个组合中只能使用一次。</span></span></p></div><div id="https://www.notion.so/651047a3c2ad4ca181627bc0706b99df" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">说明： 所有数字（包括目标数）都是正整数。 解集不能包含重复的组合。</span></span></p></div><div id="https://www.notion.so/e79ad95ee0da468f8d40bff40b1550f7" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">示例 1: 输入: candidates = [10,1,2,7,6,1,5], target = 8, 所求解集为: [ [1, 7], [1, 2, 5], [2, 6], [1, 1, 6] ]</span></span></p></div><div id="https://www.notion.so/79a10368d6d2445580c2906e9fe2e392" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">示例 2: 输入: candidates = [2,5,2,1,2], target = 5, 所求解集为: [   [1,2,2],   [5] ]</span></span></p></div></p></div><h3 id="https://www.notion.so/1ead994623b041abb1b27c770e04b2b2" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/1ead994623b041abb1b27c770e04b2b2"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">题目分析</span></span></h3><div id="https://www.notion.so/6f7553496c4f458bb7490c94b3e0663d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">与上面的题目不同的点，在于备选数组里有了重复项，并且要求结集里不能有重复的组合</span></span></p></div><div id="https://www.notion.so/03b4b60b690149538ac79304190fc6e5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">如何知道当前数组里有重复项呢？首先需要想到可以</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">排序</strong></span><span class="SemanticString">，这样重复项就会放到一块。另一个问题来了，一个解里有没有可能有重复的数字呢？从市里看是有的，这是什么原因呢？理由是他是一个解里出现的，也就是数字相同，但是位置不同。比如说 [1,1,2,3] 要求和为4，从头开始，112可以，13可以，然后到第二个1，这时候也会得到13，这时候就重复了。</span></span></p></div><div id="https://www.notion.so/fcbaade29e104408aa7d12bd0ddff064" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">如何判断会有重复组合呢？由上面的举例可知，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">如果前一个数字和当前的一样，且可以知道前一个不在当前解里的时候，那么继续下去一定是重复的</strong></span></span></p></div><div id="https://www.notion.so/8e2b085939054a9686e2cc856efd16ac" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">回到题目：</span></span></p></div><div id="https://www.notion.so/722de9792d274779a90d2583c9ed5eff" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">组合问题可以抽象为树形结构，那么“使用过”在这个树形结构上是有两个维度的，一个维度是同一树枝上使用过，一个维度是同一树层上使用过。</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">没有理解这两个层面上的“使用过” 是造成大家没有彻底理解去重的根本原因。</strong></span></span></p></div><div id="https://www.notion.so/cb8b22734ffb463792d285dbc5644511" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">那么问题来了，我们是要同一树层上使用过，还是同一树枝上使用过呢？</span></span></p></div><div id="https://www.notion.so/1320b82980e747bb9fccf08fb76086b8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">回看一下题目，元素在同一个组合内是可以重复的，怎么重复都没事，但两个组合不能相同。</span></span></p></div><div id="https://www.notion.so/d93017cc4b8f4062bd79adbcfa153453" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">所以我们要去重的是同一树层上的“使用过”，同一树枝上的都是一个组合里的元素，不用去重</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/c117db7a927a44adbe12cc2b6663ba40" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">强调一下，树层去重的话，需要对数组排序！</strong></span></span></p></div><div id="https://www.notion.so/567c8474df4347cbbcd4d8146b1ddad0" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F8f1bdf1c-3c1a-490b-a59c-bfa9e10ccb59%2FUntitled.png?width=1734&amp;table=block&amp;id=567c8474-df43-47cb-bcd4-d8146b1ddad0"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F8f1bdf1c-3c1a-490b-a59c-bfa9e10ccb59%2FUntitled.png?width=1734&amp;table=block&amp;id=567c8474-df43-47cb-bcd4-d8146b1ddad0" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/ce7878ba80ab4e91a7c75ed846198650" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">由图可知，在上面题目的基础上，这个题目的过程中需要加入一个数组，记录当前path中，那些数字使用了</span></span></p></div><h3 id="https://www.notion.so/34734afe93414826aa92051128e27d8c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/34734afe93414826aa92051128e27d8c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">去重思路</span></span></h3><pre id="https://www.notion.so/1b8dff4656294509aec699f4a0d2a7ad" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">var</span> <span class="token function-variable function">combinationSum2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">candidates<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    candidates<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> a <span class="token operator">-</span> b<span class="token punctuation">)</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> <span class="token function-variable function">backtracking</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">idx<span class="token punctuation">,</span> target<span class="token punctuation">,</span> used<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> idx<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> candidates<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>
                i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> 
                candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> candidates<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span>
                <span class="token operator">!</span>used<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
            <span class="token punctuation">)</span> 
                <span class="token keyword">continue</span>

            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>
            <span class="token function">backtracking</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> target <span class="token operator">-</span> candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> used<span class="token punctuation">,</span> path<span class="token punctuation">)</span>
            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>
            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">backtracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> target<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> res
<span class="token punctuation">}</span><span class="token punctuation">;</span></span></span></span></code></pre><h3 id="https://www.notion.so/9af05969f4db4eb480996c5e58888b8f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/9af05969f4db4eb480996c5e58888b8f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">优化</span></span></h3><div id="https://www.notion.so/cdd68dfdaf1b4f73b653126158294937" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">由代码可知，判断数层是否重复，只需要判断当前和前一个，所以用idx也可以优化代码：</span></span></p></div><pre id="https://www.notion.so/8fa79075f6ae4950bc573291e7d6b55e" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">var</span> <span class="token function-variable function">combinationSum2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">candidates<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> len <span class="token operator">=</span> candidates<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    candidates<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=></span>a<span class="token operator">-</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">backtracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">backtracking</span><span class="token punctuation">(</span><span class="token parameter">sum<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sum <span class="token operator">===</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> n <span class="token operator">=</span> candidates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">></span> i <span class="token operator">&amp;&amp;</span> candidates<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">===</span> candidates<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
              <span class="token comment">//若当前元素和前一个元素相等</span>
              <span class="token comment">//则本次循环结束，防止出现重复组合</span>
              <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//如果当前元素值大于目标值-总和的值</span>
            <span class="token comment">//由于数组已排序，那么该元素之后的元素必定不满足条件</span>
            <span class="token comment">//直接终止当前层的递归</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">></span> target <span class="token operator">-</span> sum<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
            sum <span class="token operator">+=</span> n<span class="token punctuation">;</span>
            <span class="token function">backtracking</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sum <span class="token operator">-=</span> n<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></span></span></span></code></pre><div id="https://www.notion.so/04719ff8379d44fa8db2853ba320ef6d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">这种不如used数组好理解，如果j = i，一定可以进去，这是在往下的第一个，单层的第一个，之后是否加入，就需要判断了</span></span></p></div><h1 id="https://www.notion.so/1dde497720d04716b268b6aae4a4831f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/1dde497720d04716b268b6aae4a4831f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">分割问题</span></span></h1><div id="https://www.notion.so/73cd94b5258746a9998f26502ea55138" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">我们来分析一下切割，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">其实切割问题类似组合问题</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/250b18669b954e73865af801dc07a661" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">例如对于字符串abcdef：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/f7ffde6d9a934072a538b661a07593a4" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">组合问题：选取一个a之后，在bcdef中再去选取第二个，选取b之后在cdef中在选组第三个.....。</span></span></li><li id="https://www.notion.so/0223bd8cb4b74a189b4e9aa1bf41b066" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">切割问题：切割一个a之后，在bcdef中再去切割第二段，切割b之后在cdef中在切割第三段.....。</span></span></li></ul><div id="https://www.notion.so/cdf3969c0212414aa7b8df45a5b08f07" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">感受出来了不？</span></span></p></div><div id="https://www.notion.so/378fc8536f974154acea0bfb442f7c11" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">所以切割问题，也可以抽象为一棵树形结构，即所回溯问题代码中的idx即切割起点，切割多少个字符就是在单层循环里需要关注的</span></span></p></div><h2 id="https://www.notion.so/22f217be3d9b4d598e8f03e8a8c9d974" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/22f217be3d9b4d598e8f03e8a8c9d974"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">复原ip地址</span></span></h2><div id="https://www.notion.so/bfe722c952a344859be0fb858ad14ef0" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">💡</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://leetcode.cn/problems/restore-ip-addresses/"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">力扣题目链接</strong></a></span></span><div id="https://www.notion.so/008fe8cd62ab4d62a8a61e40c2a89ef3" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">给定一个只包含数字的字符串，复原它并返回所有可能的 IP 地址格式。</span></span></p></div><div id="https://www.notion.so/e30fb5dd72814430b45875ae44ca32fe" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">有效的 IP 地址 正好由四个整数（每个整数位于 0 到 255 之间组成，且不能含有前导 0），整数之间用 &#x27;.&#x27; 分隔。</span></span></p></div><div id="https://www.notion.so/52d19934d02d4e3e9b754c3dad5ae295" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">例如：&quot;0.1.2.201&quot; 和 &quot;192.168.1.1&quot; 是 有效的 IP 地址，但是 &quot;0.011.255.245&quot;、&quot;192.168.1.312&quot; 和 &quot;192.168@1.1&quot; 是 无效的 IP 地址。</span></span></p></div><div id="https://www.notion.so/5946299348e840acbb24e04da9f2a68b" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">示例 1：</span></span></p></div><div id="https://www.notion.so/54020fee501e4ffa94602e4446942ed5" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">输入：s = &quot;25525511135&quot;
输出：[&quot;255.255.11.135&quot;,&quot;255.255.111.35&quot;]
示例 2：</span></span></p></div><div id="https://www.notion.so/9490ddd584704712a3524bbe6eccd018" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">输入：s = &quot;0000&quot;
输出：[&quot;0.0.0.0&quot;]
示例 3：</span></span></p></div><div id="https://www.notion.so/9db2afa904904d8f92c92dc69c803e07" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">输入：s = &quot;1111&quot;
输出：[&quot;1.1.1.1&quot;]
示例 4：</span></span></p></div><div id="https://www.notion.so/9e02d10c3db643acbc14fbdebe440232" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">输入：s = &quot;010010&quot;
输出：[&quot;0.10.0.10&quot;,&quot;0.100.1.0&quot;]
示例 5：</span></span></p></div><div id="https://www.notion.so/ef6e51045a6c4938a5fb63878aa3ef5d" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">输入：s = &quot;101023&quot;
输出：[&quot;1.0.10.23&quot;,&quot;1.0.102.3&quot;,&quot;10.1.0.23&quot;,&quot;10.10.2.3&quot;,&quot;101.0.2.3&quot;]
提示：</span></span></p></div><div id="https://www.notion.so/aac6bf73d41f4288aa3001e6779cc3c6" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">0 &lt;= s.length &lt;= 3000
s 仅由数字组成</span></span></p></div></p></div><h3 id="https://www.notion.so/2ca8f5d3361c4562999f7c4c129e5a16" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/2ca8f5d3361c4562999f7c4c129e5a16"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">题目分析</span></span></h3><div id="https://www.notion.so/5e33a601fe2548cea3268a1de7935f89" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">所以按照上述思路切割就行，本题目另外需要注意的有几点：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/b8e1511b740446afa82ee5610c0f931c" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">ip是四个字符串</span></span></li><li id="https://www.notion.so/8da34a56d5af47d991ead3bcb89f1bda" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">判断每个是否正确</span></span></li></ol><div id="https://www.notion.so/4cc97990704948b78f83a10b106786b5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">对于第一点，可以在path为3的时候，直接判断从当前位置到最后是否正确，如果正确那么这就是一个正确答案，这里还有一个细节，在代码里会备注</span></span></p></div><div id="https://www.notion.so/1bc1a7edacf04e29843f8ab4fa95705f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">对于第二点，ip是否ok有几个判断条件</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/1c26a10340cc43228adf535d06dc5089" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">不能为空</span></span></li><li id="https://www.notion.so/6b62d0739b724ff18e0232bcb41255d7" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">数字不能以0开头</span></span></li><li id="https://www.notion.so/31f8009c54344f988d96d7045add5ac8" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">必须小于255</span></span></li></ol><div id="https://www.notion.so/91fede086fed49859d828e9e4498b599" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">明白这几点以后，既可以开始解答了</span></span></p></div><pre id="https://www.notion.so/1d51c40bce9240c798bf3a104a281fb1" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">var</span> <span class="token function-variable function">restoreIpAddresses</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> <span class="token function-variable function">trackbacking</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">idx<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isValid</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>idx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>idx<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 多push了一个，注意pop掉</span>
        res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// *****</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> idx<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isValid</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// slice函数截取的字符串是左闭右开</span>
        path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">trackbacking</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>
        path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">trackbacking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">isValid</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>s <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">></span> <span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span></span></span></span></code></pre><h3 id="https://www.notion.so/ede7673ebdc64eb0a05c2d404a519aa8" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/ede7673ebdc64eb0a05c2d404a519aa8"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">字符串截取注意点</span></span></h3><ol class="NumberedListWrapper"><li id="https://www.notion.so/2f04eae6c9c64ba38b4875f9622aaa81" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">****** </strong></span><span class="SemanticString">这个位置需要pop一次，原因是以path中第三个为第三个值是ok的，那么后续就不需要继续了。如果不pop，因为没有走到下面回溯流程的pop，这个时候会在path里继续用第三个数的位置，放入第四个，这个逻辑需要重点理解一下.另一种理解方式就是上面push了哈哈哈，所以如果上面不push就不需要操作了🥸</span></span></li><li id="https://www.notion.so/3a3181abfb1245e785793d8679675307" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">截取的时候，注意右边参数要 +1</span></span></li></ol><h3 id="https://www.notion.so/60345b9cc9a84b23bbb65f48295dc6c6" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/60345b9cc9a84b23bbb65f48295dc6c6"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">tips</span></span></h3><div id="https://www.notion.so/6c3aa0d364314ba189ee22de558d726d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">其实，可以按照题意直接加点到字符串中，这样就不需要path等于3的那种特殊逻辑了，只需要判断点为3个的时候，判断最后一串ok不，这个会改变原先字符串，更方便一点，应该会更快。做题应该尽量考虑这种方式更好一些</span></span></p></div><h1 id="https://www.notion.so/ebdd46a790ea46029cd136a6fd20aabc" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/ebdd46a790ea46029cd136a6fd20aabc"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">子集问题</span></span></h1><div id="https://www.notion.so/1c777d42ae454c5da10636cced684f87" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">子集问题通常要求写出全部子集，所以一般没有结束条件， 遍历完所有的结果即可</span></span></p></div><h2 id="https://www.notion.so/3b92cb7afff44762929dfa250fe0d80b" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/3b92cb7afff44762929dfa250fe0d80b"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">子集</span></span></h2><div id="https://www.notion.so/41b767f35852406e872c9fe4b41404a1" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">💡</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://leetcode.cn/problems/subsets/"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">力扣题目链接(opens new window)</strong></a></span></span><div id="https://www.notion.so/7bc7a352111543cf825861c1c0c80ae2" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">给定一组不含重复元素的整数数组 nums，返回该数组所有可能的子集（幂集）。</span></span></p></div><div id="https://www.notion.so/a04098c2c11e483a968b4770e1d29359" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">说明：解集不能包含重复的子集。</span></span></p></div><div id="https://www.notion.so/04e67d7d16a44c31a623bdc94db953ec" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">示例: 输入: nums = [1,2,3] 输出: [ [3],   [1],   [2],   [1,2,3],   [1,3],   [2,3],   [1,2],   [] ]</span></span></p></div></p></div><h3 id="https://www.notion.so/7889b6f9bf9440c18602ae78abe70764" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/7889b6f9bf9440c18602ae78abe70764"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">题目分析</span></span></h3><div id="https://www.notion.so/2393affd3dca46169c774fabbe0cc067" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">组合问题可以看到，我们取得都是叶子结点，子集问题从题目来分析，并不是只有叶子结点满足，而是所有节点都ok，这个需要注意</span></span></p></div><div id="https://www.notion.so/ed5375c624694df8b7d24e197c118358" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">子集也是要求顺序的，所以也不能排序</span></span></p></div><div id="https://www.notion.so/2690001204d84ebfa04b15d5a07c41ad" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">分析三个方面：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/35ca6a5df38e48ec8560010e1f249fdf" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">返回值与参数</strong></span><span class="SemanticString">：题目要求返回所有子集，直接来吧，返回值空，参数为idx和path，表示当前位置和当前结果</span></span></li><li id="https://www.notion.so/99e01c31f40549cba6dd0cfc3cb95f3e" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">终止条件</strong></span><span class="SemanticString">：根据题目来，所以子集，所以所有的path都满足条件，没有终止条件，遍历到底即可</span></span></li><li id="https://www.notion.so/dac3ff34187b4365a96fae633ee0d358" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">单层如何搜索</strong></span><span class="SemanticString">：因为没有重复的元素，那么从前到后的顺序就不会存在重复的子集，不需要剪枝，直接加入即可</span></span></li></ol><div id="https://www.notion.so/3982206a91dd4d9cb602be4c07dcbdde" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F8f8dbe42-91e4-4014-85bd-6fb300d4717f%2FUntitled.png?width=1546&amp;table=block&amp;id=3982206a-91dd-4d9c-b602-be4c07dcbdde"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F8f8dbe42-91e4-4014-85bd-6fb300d4717f%2FUntitled.png?width=1546&amp;table=block&amp;id=3982206a-91dd-4d9c-b602-be4c07dcbdde" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/abe54b2ca8164477b7ba387f881b1242" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">遍历这个树的时候，把所有节点都记录下来，就是要求的子集集合.</strong></span></span></p></div><pre id="https://www.notion.so/50ac466e177d4f469f4993414c01d012" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">var</span> <span class="token function-variable function">subsets</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> <span class="token function-variable function">backtracking</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">idx<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> idx<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token function">backtracking</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>
            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">backtracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> res
<span class="token punctuation">}</span><span class="token punctuation">;</span></span></span></span></code></pre><h2 id="https://www.notion.so/c27d7ad8c8294a5783f53812ccfc3b0d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/c27d7ad8c8294a5783f53812ccfc3b0d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">子集2</span></span></h2><div id="https://www.notion.so/19e0800133784a7385071e2baf5081b8" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">💡</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://leetcode.cn/problems/subsets-ii/"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">力扣题目链接(opens new window)</strong></a></span></span><div id="https://www.notion.so/49522169fcfe4eff9d7c795a17ea756d" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">给定一个可能包含重复元素的整数数组 nums，返回该数组所有可能的子集（幂集）。</span></span></p></div><div id="https://www.notion.so/8d61e54d9df04b78805c747c37b6358f" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">说明：解集不能包含重复的子集。</span></span></p></div><div id="https://www.notion.so/3a8d68e35e2f46dcb574e3928c254351" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">示例:</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/c665a36f477d4bc2ae4db0ab436b7b22" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">输入: [1,2,2]</span></span></li><li id="https://www.notion.so/3039f6a8ee5d4089b1d344774b6e3dee" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">输出: [ [2], [1], [1,2,2], [2,2], [1,2], [] ]</span></span></li></ul></p></div><div id="https://www.notion.so/5c57fde71e4c4530b7278973285cf4b7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">是上一个题目的升级版，元素包含了重复元素</span></span></p></div><h3 id="https://www.notion.so/e2317929d6e84b39bcbc7016acb95375" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/e2317929d6e84b39bcbc7016acb95375"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">题目分析</span></span></h3><div id="https://www.notion.so/7c0a16cf52574cdd8d383cd19c5c4db5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">已知有重复数字，那么如何避免重复子集呢？在组合总和2里可以看到实用的方法是：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/bbb9ae30e32749489466f6d2edee48ad" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">排序数组</strong></span></span></li><li id="https://www.notion.so/f9c8cd68f51841979fb76d3ccfe6b437" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">使用used数组或者idx来判断，当前元素是否是同层重复元素</span></span></li></ol><div id="https://www.notion.so/27dff36baab642d384a36f32d7d93bcd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">排序很重要，否则相同的元素无法放到一起。</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">那么本题是否可以排序呢？是可以的</strong></span></span></p></div><div id="https://www.notion.so/e543fd6a538c4143be1b7677bfccedb3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">代码就省略了，类似上面的写法</span></span></p></div><h3 id="https://www.notion.so/378d172c15454f108b497de16d3c83d7" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/378d172c15454f108b497de16d3c83d7"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">另一种去重思路</span></span></h3><div id="https://www.notion.so/8c7c9487c49f41b2a0e96b6a24ae4fdb" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">去重在javascript中，可以想到一种结构，那就是set</span></span></p></div><div id="https://www.notion.so/1807144026df480eafdf6adf53a763d4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">还有一个需要重点注意的是，这种重复的问题，一定要让重复的挨到一起，也就是排序</span></span></p></div><pre id="https://www.notion.so/50ed9c33edb14af6ab52ba0a27dcfc0c" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">var</span> <span class="token function-variable function">subsetsWithDup</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   nums<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> a <span class="token operator">-</span> b<span class="token punctuation">)</span>

  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> <span class="token function-variable function">backtracking</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">idx<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> idx<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">continue</span>

      path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
      set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token function">backtracking</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>
      path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">backtracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span><span class="token punctuation">;</span></span></span></span></code></pre><div id="https://www.notion.so/c80e79e702ea477183c8b6a2b58bc59f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">可以看到，在每层进来的时候，都设置了一个set存放用过的不重复元素</span></span></p></div><div id="https://www.notion.so/efd4731408864b2cbdff8f3312fb8b3d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">如果之前这一层用过了这个元素，那么下一次进来就直接continue了</span></span></p></div><h3 id="https://www.notion.so/e67fa6aaf68547548f8661ea354767f6" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/e67fa6aaf68547548f8661ea354767f6"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">set去重与used数组去重比较</span></span></h3><div id="https://www.notion.so/441f049c784e4f9aad729efcc59e1415" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Resource"><a href="https://www.notion.so/46781c4c86cd4654b567381ebb894d70"><span class="SemanticStringArray"><span class="SemanticString">组合总和2</span></span></a></span></span><span class="SemanticString"> 和 </span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Resource"><a href="https://www.notion.so/c27d7ad8c8294a5783f53812ccfc3b0d"><span class="SemanticStringArray"><span class="SemanticString">子集2</span></span></a></span></span><span class="SemanticString"> 都涉及到了去重，介绍了几个方法，这里一起整理一下</span></span></p></div><div id="https://www.notion.so/f23fdf1d1d15452284305146ea5819e2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">通过上面的解法可以看到，used数组思想与set思想都是类似的，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">同一层用过的数字不再使用。</strong></span><span class="SemanticString">（再加入的时候判断是否结果有重复去重也可以，不过这种思想效率更高）</span></span></p></div><div id="https://www.notion.so/1cc3fecf14f64f28b456143da7975e76" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">那么二者效率如何呢？</span></span></p></div><div id="https://www.notion.so/be5ceb5e36884443822312e8065333a9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">需要注意的是：</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">使用set去重的版本相对于used数组的版本效率都要低很多</strong></span><span class="SemanticString">，大家在leetcode上提交，能明显发现。因为程序运行的时候对unordered_set 频繁的insert，unordered_set需要做哈希映射（也就是把key通过hash function映射为唯一的哈希值）相对费时间，而且insert的时候其底层的符号表也要做相应的扩充，也是费时的。</span></span></p></div><div id="https://www.notion.so/01eb8e3781014ab89e437151461fa240" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">而使用used数组在时间复杂度上几乎没有额外负担！</strong></span></span></p></div><div id="https://www.notion.so/bb4e894d60e4413686601822ee10f2b7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">使用set去重，不仅时间复杂度高了，空间复杂度也高了。</strong></span><span class="SemanticString">组合，子集，排列问题的空间复杂度都是O(n)，但如果使用set去重，空间复杂度就变成了O(n^2)，因为每一层递归都有一个set集合，系统栈空间是n，每一个空间都有set集合。</span></span></p></div><div id="https://www.notion.so/e02a5d0f057f42f5b324c606c44a9db8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">那有同学可能疑惑 用used数组也是占用O(n)的空间啊？</span></span></p></div><div id="https://www.notion.so/05686ba206a542e8959d2d6eae99f0f0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">used数组可是全局变量，每层与每层之间公用一个used数组，所以空间复杂度是O(n + n)，最终空间复杂度还是O(n)。</span></span></p></div><h1 id="https://www.notion.so/4234a8ca5628494785f324a4618bb6f3" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/4234a8ca5628494785f324a4618bb6f3"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">排列问题</span></span></h1><div id="https://www.notion.so/da5797d6c8b9476790b33b3066f8d5a9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">排列问题就有顺序的要求了，普通的排列问题，控制长度求即可，直接套用模板，值得注意的是有重复元素的排列问题</span></span></p></div><div id="https://www.notion.so/a80bf71dd8164ff4827bd3fccfb25dbf" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在组合问题中，通常需要参数里包括idx，表示单层循环的范围从idx开始</span></span></p></div><div id="https://www.notion.so/f8473717919747e6a45c447320329fcf" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">排列问题不需要传入，因为排列需要取全部的，存在顺序，比如说31和13是两种排列，一般使用used数组表示用了哪些</span></span></p></div><h2 id="https://www.notion.so/d08901d43adb49d0bcbd14821952ab80" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/d08901d43adb49d0bcbd14821952ab80"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">全排列2</span></span></h2><div id="https://www.notion.so/9b844c96fab2400481b89ce090f87c99" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">💡</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://leetcode.cn/problems/permutations-ii/"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">力扣题目链接</strong></a></span></span><div id="https://www.notion.so/56ba0564986448dfa7c8dfc5d27e43e2" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">给定一个 没有重复 数字的序列，返回其所有可能的全排列。</span></span></p></div><div id="https://www.notion.so/d71e53c59d0d4f0b87fe0d93cf3951ee" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">示例:</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/1a9d6195cbdb4d9192359992e4623410" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">输入: [1,2,3]</span></span></li><li id="https://www.notion.so/e32138500ee94845a8db783c89fa1a89" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">输出: [ [1,2,3], [1,3,2], [2,1,3], [2,3,1], [3,1,2], [3,2,1] ]</span></span></li></ul><div id="https://www.notion.so/e9cd042bf0d944aeb475d62177f62c42" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">给定一个可包含重复数字的序列 nums ，按任意顺序 返回所有不重复的全排列。</span></span></p></div><div id="https://www.notion.so/0d8b175dd9864fd7999b7cba7060e8e8" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">示例 1：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/1d9bc7ebd32e42fba97d84594345d09e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">输入：nums = [1,1,2]</span></span></li><li id="https://www.notion.so/2b266eb44bd54972829070cd343be795" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">输出： [[1,1,2], [1,2,1], [2,1,1]]</span></span></li></ul><div id="https://www.notion.so/6f0dc7efd61f453c9f2eaa2d5b897ce4" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">示例 2：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/bfbce2248ac8413db8e5f8f200d5ffaa" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">输入：nums = [1,2,3]</span></span></li><li id="https://www.notion.so/feadfac574ac42b69a418f36618d9d93" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">输出：[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]</span></span></li></ul><div id="https://www.notion.so/ef83724f380b4849ad71614a882c26a7" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">提示：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/3ceca1fad7b84e7389518bd3b6a4180f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">1 &lt;= nums.length &lt;= 8</span></span></li><li id="https://www.notion.so/f54c4d1011494109b29085e9ed2d7140" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">10 &lt;= nums[i] &lt;= 10</span></span></li></ul></p></div><h3 id="https://www.notion.so/d90be35cfd0b471cb695559a150875fb" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/d90be35cfd0b471cb695559a150875fb"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">题目分析</span></span></h3><div id="https://www.notion.so/1bd9bf9726a14aaf838393c8e0c233e9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">重复 → 排序 + used数组/set/idx判断前一个方法解答</span></span></p></div><pre id="https://www.notion.so/d5f93b588a494471b9cbb078f26d6b21" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">var</span> <span class="token function-variable function">permuteUnique</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    nums<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> a <span class="token operator">-</span> b<span class="token punctuation">)</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> <span class="token function-variable function">backtracking</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>
                i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
                nums<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            <span class="token punctuation">)</span>
                <span class="token keyword">continue</span>
            
            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token function">backtracking</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">backtracking</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> res
<span class="token punctuation">}</span><span class="token punctuation">;</span></span></span></span></code></pre><div id="https://www.notion.so/68a9dc18379b4d779d8762cbe3d1233a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">上述是一个错误的代码，使用了省略used数组的思路。错误的原因在于，组合的时候认为加入的第一个一定是ok的，因为一直往后走的</span></span></p></div><div id="https://www.notion.so/f6880fff5dde44f98c839054eb1dd5df" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">而排列不可以，因为排列都是从0开始取，所以不能保证第一个也ok，这个时候就必须得用used数组了</span></span></p></div><pre id="https://www.notion.so/57342be0172a452cbe383e5f5d77526d" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">var</span> <span class="token function-variable function">permuteUnique</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    nums<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> a <span class="token operator">-</span> b<span class="token punctuation">)</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> <span class="token function-variable function">backtracking</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">used<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>
                used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token comment">// 用过了或者同样的值同一层已经用过了</span>
                <span class="token punctuation">(</span>
                    i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
                    nums<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span>
                    <span class="token operator">!</span>used<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">)</span> 
                <span class="token keyword">continue</span>
            
            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>
            <span class="token function">backtracking</span><span class="token punctuation">(</span>used<span class="token punctuation">,</span> path<span class="token punctuation">)</span>
            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">backtracking</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> res
<span class="token punctuation">}</span><span class="token punctuation">;</span></span></span></span></code></pre><h3 id="https://www.notion.so/bcf7cffe90c448dfa0cd57f8d461025c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/bcf7cffe90c448dfa0cd57f8d461025c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">思路扩展</span></span></h3><div id="https://www.notion.so/ad8cad3e86964e399437ac771e36f522" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">对于排列问题，树层上去重和树枝上去重，都是可以的，但是树层上去重效率更高！</strong></span></span></p></div><div id="https://www.notion.so/216209bc41df4d6b9bc9d64b8ad10bab" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在上面代码中，</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/2b7607af310a4ceaa7e7452287cdb224" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">用used[i - 1] === true  表示的是 树枝去重</span></span></li><li id="https://www.notion.so/1806c0b2baea40079e24d450b2a94d58" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">用used[i - 1] === false  表示的是 树层去重</span></span></li></ol><div id="https://www.notion.so/3c5f354bd82243cfb9aef2d6325dc840" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">用输入: [1,1,1] 来举一个例子。</span></span></p></div><div id="https://www.notion.so/783ffca24fc840f7ab118223eb168d2e" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F4dfb0cc4-8fea-4cef-9fa0-0e20dab23536%2FUntitled.png?width=1534&amp;table=block&amp;id=783ffca2-4fc8-40f7-ab11-8223eb168d2e"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F4dfb0cc4-8fea-4cef-9fa0-0e20dab23536%2FUntitled.png?width=1534&amp;table=block&amp;id=783ffca2-4fc8-40f7-ab11-8223eb168d2e" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/ec39035e62564c27a8beb70d1f3df9c6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">数层去重</span></span></p></div><div id="https://www.notion.so/5d1e630bb6b84babb10cabf28cf94936" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F5efd1369-c857-429d-a82a-8b61b1caa465%2FUntitled.png?width=2274&amp;table=block&amp;id=5d1e630b-b6b8-4bab-b10c-abf28cf94936"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F5efd1369-c857-429d-a82a-8b61b1caa465%2FUntitled.png?width=2274&amp;table=block&amp;id=5d1e630b-b6b8-4bab-b10c-abf28cf94936" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/41e04de3976f4fd19973f7db7dbc2e0e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">树枝去重</span></span></p></div><div id="https://www.notion.so/5660fffc31b541669445dfc664db24b3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">由此可见，树层上对前一位去重非常彻底，效率很高，树枝上对前一位去重虽然最后可以得到答案，但是做了很多无用搜索。</span></span></p></div><h1 id="https://www.notion.so/87906050912e4f5a8620b6675fb0f173" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/87906050912e4f5a8620b6675fb0f173"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">棋盘问题</span></span></h1><h1 id="https://www.notion.so/fc2585def2a546f9877920a46258fd87" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/fc2585def2a546f9877920a46258fd87"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">其他问题</span></span></h1><div id="https://www.notion.so/2bb09cec029a4dafb4583d2289d405a5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></article>
  <footer class="Footer">
  <div>&copy; Zhao’s Blog 2022</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>